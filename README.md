# Paddle_dog
百度飞桨小汪打榜赛总结
**打榜赛第六，全校第一**

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12da16876ccb4f76a6ad9986227e0636~tplv-k3u1fbpfcp-watermark.image?)

本来不想参加这个比赛的，但看到榜单前几名都是武汉理工大学的，武汉科技大学狠狠的排在后面，于是开始打了。由于自己之前的科研经历就是目标检测，也对这个方面有一定了解。

本人主要负责提一些tricks，提一些思路，然后针对结果提供调优思路。

![99adeb2cbea443108cc8b9f5564373aa.jpg](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd6dc6eeecfb488d92881f6a3735a061~tplv-k3u1fbpfcp-watermark.image?)
于是自己也列了下自己草图

数据方面：
- 离线增强 主要目的是数量，处理类别不平衡
- 在线增强 主要是质量，对图像进行处理变换，增加质量
- 多尺度处理，改变图像输入尺寸等等

网络：
- 损失函数
- 后处理 nms,WBF

还有优化器选择，学习率，epoch，多线程提高fps进而使用大模型提高精度

一开始对图像进行检查，发现类别不平衡，然后进行离线数据增强，但训练结果比不增强还差，而且person的精度map很低只有0.05，一个学弟告诉我数据集中person 有的没标。然后我让他训个模型，将数据集中的person都打标，经他反馈，提交后分数更低。于是我想是不是测试系统的测试集person就是错的，那我识别将他**没标person的检测出来person那系统就认为是负样本**，分数当然低。于是我想既然数据集person是错的，那就不管person这类数据集了。

另一个发现fire中存在小目标，且检测精度较低，于是我考虑使用ppyoloe-sod这是针对小目标的网络，验证集中fire的精度确实有所上升，但其他几类的降了，提交分数也降了。也尝试过RT-DETR但精度不如PPYOLOE+，然后我们还是确定使用ppyoloeplus-l这个网络。

##  数据

我提了个Mixup，autoaugment增强

训练集和验证集合并

## 后处理

我尝试了WBF这个方法，但分数还有所下降。然后根据数据集中helmet，head这类数据集密集框较多，就提出对nms阈值进行调优，也是涨分最高的策略，也侧面说明测试集中这类目标较多。

TTA测试时数据增强，使用后感觉几乎没变

 **一个重要的训练策略**
 训练一段时间后，网络趋于收敛，此时停止训练。降低学习率进行训练，将best_model作为这次训练的预训练模型继续训练，节省训练时间。
 


